# redis到底是单线程还是多线程？
1. Redis 单线程到底指什么？  
  没错，大家所熟知的 Redis 确实是单线程模型，指的是执行 Redis 命令的核心模块是单线程的，而不是整个 Redis 实例就一个线程，  
Redis 其他模块还有各自模块的线程的。

下面这个解释比较好：
![avatar](https://raw.githubusercontent.com/tanxw123123/DATABASE/master/images/1.jpg)
Redis基于Reactor模式开发了网络事件处理器，这个处理器被称为文件事件处理器。它的组成结构为4部分：多个套接字、IO多路复用程序、  
文件事件分派器、事件处理器。因为文件事件分派器队列的消费是单线程的，所以Redis才叫单线程模型。

其中执行命令阶段，由于 Redis 是单线程来处理命令的，所有每一条到达服务端的命令不会立刻执行，所有的命令都会进入一个 Socket 队列中，
当 socket 可读则交给单线程事件分发器逐个被执行。

2. Redis 为何选择单线程？  
Redis 的核心网络模型选择用单线程来实现，这在一开始就引起了很多人的不解，Redis 官方的对于此的回答是：  
对于一个 DB 来说，CPU 通常不会是瓶颈，因为大多数请求不会是 CPU 密集型的，而是 I/O 密集型。具体到 Redis 的话，如果不考虑 RDB/AOF   
等持久化方案，Redis 是完全的纯内存操作，执行速度是非常快的，因此这部分操作通常不会是性能瓶颈，Redis 真正的性能瓶颈在于网络 I/O，  
也就是客户端和服务端之间的网络传输延迟，因此 Redis 选择了单线程的 I/O 多路复用来实现它的核心网络模型。  

单线程的原因可以归纳如下：
1. 避免过多的上下文切换开销  
2. 避免同步机制的开销  
3. 简单可维护  
